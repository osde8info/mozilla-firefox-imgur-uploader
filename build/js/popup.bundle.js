!function(e){var t={};function o(r){if(t[r])return t[r].exports;var l=t[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(r,l,function(t){return e[t]}.bind(null,l));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=4)}([function(e,t){e.exports=class{constructor(){browser.storage.local.get("firefox-uploader-imgur").then(e=>{0==Object.getOwnPropertyNames(e).length&&(console.log("test"),browser.storage.local.set({"firefox-uploader-imgur":[]}))})}add(e){return new Promise((t,o)=>{browser.storage.local.get("firefox-uploader-imgur").then(o=>{var r=o["firefox-uploader-imgur"];e.viewable=!0,r.push(e),console.log(r),browser.storage.local.set({"firefox-uploader-imgur":r}).then(()=>{t("test")})})})}remove(e){browser.storage.local.get("firefox-uploader-imgur").then(t=>{var o=[];for(let r of t["firefox-uploader-imgur"])r.id!=e&&o.push(r);browser.storage.local.set({"firefox-uploader-imgur":o})})}change(e,t){!e instanceof Array&&(e=[e]);browser.storage.local.get("firefox-uploader-imgur").then(o=>{var r=[];for(let n of o["firefox-uploader-imgur"])if(e.indexOf(n.id)>=0){for(var l in console.log(e),console.log(t),t)t.hasOwnProperty(l)&&(n[l]=t[l]);console.log(n),r.push(n)}else r.push(n);browser.storage.local.set({"firefox-uploader-imgur":r})})}removeAll(){browser.storage.local.set({"firefox-uploader-imgur":[]})}}},,,function(e,t){e.exports.setCopy=function(e){var t="clipboard-textarea-hidden-id",o=document.getElementById(t);if(o)console.log("The textarea already exists :3");else{console.log("Creating textarea");var r=document.createElement("textarea");r.id=t,r.style.position="fixed",r.style.top=-100,r.style.left=-100,r.style.width="1px",r.style.height="1px",r.style.padding=0,r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",document.querySelector("body").appendChild(r),o=document.getElementById(t)}console.log(o),o.value=e,o.select();try{document.execCommand("copy")?console.log("The text is now on the clipboard"):console.error("Cannot copy text")}catch(e){console.log("Unable to copy.")}}},function(e,t,o){var r=new(o(0)),l=o(3);function n(e,t){return e.className.split(" ").indexOf(t)>-1}browser.storage.local.get("firefox-uploader-imgur").then(e=>{console.log(e);for(let t of e["firefox-uploader-imgur"].reverse())console.log(t),null!=t&&null!=t.link&&0!=t.viewable&&$(document.getElementById("image-list")).append('<div class="callout small image-url" data-closable data-url="'+t.link+'">            <p><img src="https://i.imgur.com/'+t.id+'.jpg" class="preview"> <span class="link">'+t.link+'</span><button class="copy-clipboard" id="'+t.link+'-copy">Copy</button></p>            <button class="close-button" aria-label="Dismiss alert" type="button"  id="'+t.id+'-close" data-close>            <span aria-hidden="true" class="close-button-bubble">&times;</span>            </button>        </div>')}),browser.storage.local.get("firefox-uploader-auto-copy").then(e=>{document.getElementById("clipboard-switch").checked=e["firefox-uploader-auto-copy"]}),document.addEventListener("click",(function(e){if(n(e.target,"close-button")&&(console.log(e.target.id),r.change(e.target.id.split("-close")[0],{viewable:!1})),n(e.target,"close-button-bubble")&&(console.log(e.target.id),r.change(e.target.parentNode.id.split("-close")[0],{viewable:!1})),n(e.target,"copy-clipboard")){var t=e.target.id.split("-copy")[0];l.setCopy(t)}if(n(e.target,"clear-all")){t=document.querySelectorAll(".image-url");var o=[];for(let e=0;e<t.length;e++)console.log(t[e].querySelector(".close-button").id),o.push(t[e].querySelector(".close-button").id.split("-close")[0]),t[e].parentNode.removeChild(t[e]);r.change(o,{viewable:!1})}}),!1),document.getElementById("clipboard-switch").addEventListener("change",e=>{console.log(e.target.checked),browser.storage.local.set({"firefox-uploader-auto-copy":e.target.checked})}),document.addEventListener("mouseover",(function(e){if(n(e.target,"preview")){console.log(e.pageX),console.log(e.pageY),console.log(e.target.attributes);var t=$(document.querySelector("div.viewer"));t.show().css({left:"100px",top:e.pageY-30}),t.children("img").attr("src",e.target.getAttribute("src"))}}),!1),document.addEventListener("mouseout",(function(e){n(e.target,"preview")&&$(document.querySelector("div.viewer")).hide()}),!1),document.querySelector("#add-image").addEventListener("click",(function(){browser.windows.create({type:"detached_panel",titlePreface:"Upload Image",url:"../templates/panel.html",width:400,height:200,left:100,allowScriptsToClose:!0});console.log("test")})),document.querySelector("#options").addEventListener("click",(function(){browser.tabs.create({url:"settings/options.html"})}))}]);
//# sourceMappingURL=popup.bundle.js.map